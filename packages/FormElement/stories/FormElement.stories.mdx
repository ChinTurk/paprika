import { Meta } from "@storybook/addon-docs/blocks";
import { Description } from "@storybook/addon-docs/blocks";
import { getStoryName } from "storybook/storyTree";
import { Rule, Tagline } from "storybook/assets/styles/common.styles";
import Readme from "../README.md";
import { FormElementStory } from "./FormElement.stories.styles";
import CheckboxExample from "./examples/CheckboxExample";
import RadioExample from "./examples/RadioExample";
import DatePickerExample from "./examples/DatePickerExample";
import AccessibilityExample from "./examples/AccessibilityExample";
import ListBoxExample from "./examples/ListBoxExample";
import ButtonGroupExample from "./examples/ButtonGroupExample";
import NativeInputExample from "./examples/NativeInputExample";
import NestedExample from "./examples/NestedExample";
import HTMLExample from "./examples/HTMLExample";
import ComponentLabelExample from "./examples/ComponentLabelExample";
import FormElement from "../src/FormElement";

<Meta
  title={`${getStoryName("FormElement")}/Docs`}
  component={FormElement}
  parameters={{ options: { showPanel: false } }}
/>

<Description markdown={Readme} />

## More Examples

### Index

- <a href="#accessibility">Accessibility</a>
- <a href="#components">Components</a>
- <a href="#complex-components">Complex Components</a>

### Accessibility

The `<FormElement>` has been designed with accessibility in mind. By using `<FormElement.Instructions>` users can add instructions for the end user. Users can also make use of the `<FormElement.Description>` to add additional directions for consumers. Both of these, along with any error messages can be associated to the input field by applying the supplied `ariaDescribedBy` parameter in the render function supplied to the `children` of `<FormElement.Content>`. Users can also make use of the `<FormElement.Error />` sub-component to create an error message to help clarify any user errors to consumers.

In addition, a `<label>` is rendered by the `<FormElement>` and is associated to the input field by the `idForLabel` parameter of the same `children` function.

```jsx
<FormElement label="Form Label">
  <FormElement.Instructions>
    <span>
      Example text for extra panel for questionnaires. Example text for extra panel for questionnaires Example text for
      extra panel for questionnaires. Example text for extra panel for questionnaires
    </span>
  </FormElement.Instructions>
  <FormElement.Content>
    {({ idForLabel, ariaDescribedBy }) => (
      <Input
        id={idForLabel}
        onChange={handleChange}
        value={value}
        placeholder="Form placeholder"
        aria-describedby={ariaDescribedBy}
        hasError={Boolean(errorText.length)}
      />
    )}
  </FormElement.Content>
  <FormElement.Description>
    <span>This is description text</span>
  </FormElement.Description>
  <FormElement.Error>{errorText}</FormElement.Error>
  <FormElement.Help>
    Give me some help. <a href="wegalvanize.com">Learn more</a>.
  </FormElement.Help>
</FormElement>
```

##### Result

<FormElementStory>
  <Tagline>Form Element with instructions component.</Tagline>
  <br />
  <AccessibilityExample />
</FormElementStory>

### Basic Input Components

The `<FormElement>` can be used with different components to fulfill a variety of input needs. This can be achieve by including basic input components such as the `<Select>`, `<Textarea>`, `<Checkbox>`,  etc. as `children` for the `<FormElement.Content>`

```jsx
<FormElement hasFieldSet label="Form Label">
  <FormElement.Content>
    {({ ariaDescribedBy: ariaDescribedByOuter }) => getCheckboxOptions(ariaDescribedByOuter)}
  </FormElement.Content>
  <FormElement.Description>
    <span>Description of this field.</span>
  </FormElement.Description>
  <FormElement.Error>{errorText}</FormElement.Error>
  <FormElement.Help>
    Give me some help. <a href="wegalvanize.com">Learn more</a>.
  </FormElement.Help>
</FormElement>
```

##### Result

<FormElementStory>
  <Tagline>Form Element with checkboxes.</Tagline>
  <br />
  <CheckboxExample />
</FormElementStory>
<Rule />
<FormElementStory>
  <Tagline>Form Element with radios.</Tagline>
  <br />
  <RadioExample />
</FormElementStory>

### Complex Input Components

The `<FormElement />` can handle a variety of components to further increase the users indivudal needs. This can range from a `<DatePicker />` component to a `<ListBox />` component. The following code snippet is an example of the `ComponentLabel` this example allows users to use the `label` property of the `<FormElement/ />`. Users can set the label property to equal an entire component, in this particular example making use of the `<Heading />` component.

```jsx
<FormElement
  hasRequiredLabel={hasRequiredLabel}
  label={
    <Heading level={5}>
      <strong>
        <i>Form Label</i>
      </strong>
    </Heading>
  }
>
  <FormElement.Instructions>
    <span>
      Example text for extra panel for questionnaires. Example text for extra panel for questionnaires Example text for
      extra panel for questionnaires. Example text for extra panel for questionnaires
    </span>
  </FormElement.Instructions>
  <FormElement.Content>
    {({ idForLabel, ariaDescribedBy }) => (
      <Input
        id={idForLabel}
        onChange={handleChange}
        value={value}
        placeholder="Form placeholder"
        aria-describedby={ariaDescribedBy}
        aria-required={hasRequiredLabel}
        hasError={Boolean(errorText.length)}
        isDisabled={isDisabled}
        isReadOnly={isReadOnly}
        size={size}
      />
    )}
  </FormElement.Content>
  <FormElement.Help>
    Give me some help. <a href="wegalvanize.com">Learn more</a>.
  </FormElement.Help>
</FormElement>
```

##### Result

<FormElementStory>
  <Tagline>Form Element using component in label</Tagline>
  <br />
  <ComponentLabelExample />
</FormElementStory>
<Rule />
<FormElementStory>
  <Tagline>Form Element with Date Picker.</Tagline>
  <br />
  <DatePickerExample />
</FormElementStory>
<Rule />
<FormElementStory>
  <Tagline>Form Element with Listbox.</Tagline>
  <br />
  <ListBoxExample />
</FormElementStory>
<Rule />
<FormElementStory>
  <Tagline>Form Element with ButtonGroup.</Tagline>
  <br />
  <ButtonGroupExample />
</FormElementStory>
<Rule />
<FormElementStory>
  <Tagline>Form Element nested Form Elements.</Tagline>
  <br />
  <NestedExample />
</FormElementStory>
